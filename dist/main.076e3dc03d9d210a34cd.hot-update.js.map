{"version":3,"file":"main.076e3dc03d9d210a34cd.hot-update.js","mappings":";;;;;;;;;;;;;;AAAA;AACA;AACA;AACoC,CAAC;;AAErC;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA,qEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,eAAe;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,eAAe;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,4CAAW;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,4CAAW;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA,kBAAkB;AAClB;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE;AACpE,sEAAsE;AACtE;AACA;AACA;AACA,iCAAiC,4CAAW;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iEAAe,QAAQ,EAAC;;;;;;;;UC5MxB","sources":["webpack://opensail/./src/js/controls.js","webpack://opensail/webpack/runtime/getFullHash"],"sourcesContent":["/**\n * Controls class to handle user input\n */\nimport * as Utils from './utils.js'; // Import all utility functions as Utils namespace\n\nclass Controls {\n    /**\n     * Create a new Controls instance\n     * @param {Object} options - Controls configuration options\n     * @param {Function} options.onControlsChange - Callback for control changes\n     */\n    constructor(options = {}) {\n        // Control state\n        this.state = {\n            rudderAngle: 0, // -45 to 45 degrees\n            throttle: 0, // 0 to 1 (for motor)\n            cameraView: 'orbit', // Only orbit mode is now used\n        };\n        \n        // Control sensitivity\n        this.rudderSensitivity = 5; // Degrees per keypress/update\n        this.throttleSensitivity = 0.1; // Throttle change per keypress/update\n        \n        // Keys currently pressed\n        this.keys = {};\n        \n        // Callback when controls change\n        this.onControlsChange = options.onControlsChange || (() => {});\n        \n        // Bind methods\n        this.handleKeyDown = this.handleKeyDown.bind(this);\n        this.handleKeyUp = this.handleKeyUp.bind(this);\n        this.update = this.update.bind(this);\n        \n        // Set up event listeners\n        this.setupEventListeners();\n    }\n    \n    /**\n     * Set up event listeners for keyboard and touch\n     */\n    setupEventListeners() {\n        // Keyboard events\n        window.addEventListener('keydown', this.handleKeyDown);\n        window.addEventListener('keyup', this.handleKeyUp);\n        \n        // We could add touch/gamepad controls later\n    }\n    \n    /**\n     * Handle key down events\n     * @param {KeyboardEvent} event - Keyboard event\n     */\n    handleKeyDown(event) {\n        this.keys[event.key] = true;\n        \n        // Prevent default for game control keys\n        if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'w', 'a', 's', 'd'].includes(event.key)) {\n            event.preventDefault();\n        }\n        \n        // Camera view changes - removed since we only use orbit mode now\n    }\n    \n    /**\n     * Handle key up events\n     * @param {KeyboardEvent} event - Keyboard event\n     */\n    handleKeyUp(event) {\n        this.keys[event.key] = false;\n    }\n    \n    /**\n     * Update controls based on current key state\n     * @param {number} deltaTime - Time since last update in seconds\n     */\n    update(deltaTime) {\n        let controlsChanged = false;\n        \n        // Calculate rudder input from keyboard\n        let rudderInput = 0;\n        if (this.keys['ArrowLeft'] || this.keys['a']) rudderInput -= 1;\n        if (this.keys['ArrowRight'] || this.keys['d']) rudderInput += 1;\n        \n        // Apply rudder input\n        if (rudderInput !== 0) {\n            const newRudderAngle = Utils.clamp(\n                this.state.rudderAngle + rudderInput * this.rudderSensitivity,\n                -45, \n                45\n            );\n            \n            if (newRudderAngle !== this.state.rudderAngle) {\n                this.state.rudderAngle = newRudderAngle;\n                controlsChanged = true;\n            }\n        }\n        \n        // Calculate throttle input from keyboard\n        let throttleInput = 0;\n        if (this.keys['w'] || this.keys['ArrowUp']) throttleInput += 1;\n        if (this.keys['s'] || this.keys['ArrowDown']) throttleInput -= 1;\n        \n        // Apply throttle input\n        if (throttleInput !== 0) {\n            const newThrottle = Utils.clamp(\n                this.state.throttle + throttleInput * this.throttleSensitivity,\n                0,\n                1\n            );\n            \n            if (newThrottle !== this.state.throttle) {\n                this.state.throttle = newThrottle;\n                controlsChanged = true;\n            }\n        } else {\n            // Auto-decrease throttle when no key is pressed\n            if (this.state.throttle > 0) {\n                this.state.throttle = Math.max(0, this.state.throttle - this.throttleSensitivity * 0.5);\n                controlsChanged = true;\n            }\n        }\n        \n        // Notify if controls changed\n        if (controlsChanged) {\n            // Return rudder to center when not actively turning\n            if (this.state.rudderAngle !== 0) {\n                const returnRate = 15 * deltaTime; // Degrees per second\n                \n                if (Math.abs(this.state.rudderAngle) < returnRate) {\n                    this.state.rudderAngle = 0;\n                } else if (this.state.rudderAngle > 0) {\n                    this.state.rudderAngle -= returnRate;\n                } else {\n                    this.state.rudderAngle += returnRate;\n                }\n                \n                controlsChanged = true;\n            }\n        }\n        \n        // Calculate sail input from keyboard\n        let sailInput = 0;\n        if (this.keys['ArrowUp'] || this.keys['w']) sailInput -= 1; // Tighten sail\n        if (this.keys['ArrowDown'] || this.keys['s']) sailInput += 1; // Loosen sail\n        \n        // Apply sail input\n        if (sailInput !== 0) {\n            const newSailAngle = Utils.clamp(\n                this.state.sailAngle + sailInput * this.sailSensitivity,\n                -90,\n                90\n            );\n            \n            if (newSailAngle !== this.state.sailAngle) {\n                this.state.sailAngle = newSailAngle;\n                controlsChanged = true;\n            }\n        }\n        \n        // Notify if controls changed\n        if (controlsChanged) {\n            this.notifyControlChange();\n        }\n    }\n    \n    /**\n     * Notify callback about control changes\n     */\n    notifyControlChange() {\n        this.onControlsChange({\n            rudderAngle: this.state.rudderAngle,\n            sailAngle: this.state.sailAngle,\n            throttle: this.state.throttle,\n            cameraView: this.state.cameraView,\n            trim: this.state.trim,\n        });\n    }\n    \n    /**\n     * Reset controls to default state\n     */\n    reset() {\n        this.state = {\n            rudderAngle: 0,\n            sailAngle: 0,\n            throttle: 0,\n            cameraView: 'orbit',\n            trim: 0,\n        };\n        \n        this.notifyControlChange();\n    }\n    \n    /**\n     * Clean up by removing event listeners\n     */\n    dispose() {\n        window.removeEventListener('keydown', this.handleKeyDown);\n        window.removeEventListener('keyup', this.handleKeyUp);\n    }\n}\n\n// Export the Controls class\nexport default Controls; ","__webpack_require__.h = () => (\"c94d9506be67ee03260e\")"],"names":[],"sourceRoot":""}